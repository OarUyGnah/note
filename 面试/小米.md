# 1

#### 网络服务器的优化，使用了sendfile替代read write，为什么muduo没有用？

因为muduo是最简化的实现，并没有细化情况，read write可以适用于所有的情况，

而sendfile只能用于发送文件，只适用于传输文件

（sendfile的优势和局限性)

sendfile函数是用于在两个文件描述符之间直接传输数据的函数，它的优势主要体现在以下几个方面：

1. 减少数据拷贝：sendfile函数在内核中完成数据传输，避免了数据在用户空间和内核空间之间的多次拷贝，相比read和write函数可以减少一次数据拷贝，提高了数据传输的效率。

2. 减少系统调用次数：sendfile函数只需要一个系统调用就可以完成整个数据传输过程，而read和write函数在进行数据传输时需要多次系统调用，因此sendfile函数可以减少系统调用的次数，提高了程序的性能。

3. 支持零拷贝：sendfile函数可以利用操作系统提供的零拷贝技术，将文件数据直接从磁盘读取到网络套接字中，避免了数据在用户空间和内核空间之间的拷贝，减少了CPU的开销，提高了数据传输的效率。

然而，sendfile函数也存在一些局限性：

1. **仅适用于文件传输**：sendfile函数只能用于文件之间的数据传输，而read和write函数可以用于任意类型的文件描述符之间的数据传输。
2. **不支持数据转换**：sendfile函数只能进行原样的数据传输，无法对传输的数据进行处理或转换，而read和write函数可以对数据进行处理或转换。



#### 协程的上下文切换为什么比线程要小？

协程的上下文切换比线程要小是因为协程在**同一个线程中执行**，切换开销较小，**切换时机由程序员控制，避免不必要的切换**，以及**切换过程在用户态**完成，减少了系统调用的开销。

#### 单向迭代器要实现什么运算符重载？



#### Protobuf报文为什么会乱码

1. 编码问题：Protobuf的报文是二进制数据，在终端显示时需要正确的编码方式进行解码。如果使用的编码方式与报文的编码方式不一致，就会导致显示为乱码。常见的编码方式有UTF-8、GBK等，需要确保终端使用的编码方式与报文一致。
2. 控制字符：Protobuf的报文中可能包含控制字符，如换行符、回车符等。这些控制字符在终端显示时可能会被解释为特殊的控制命令，导致显示为乱码。可以尝试使用特殊的显示工具或设置终端的显示选项来解决。
3. 无法解析的数据：如果Protobuf的报文中包含了无法解析的数据，终端可能无法正确显示该部分数据，导致显示为乱码。这可能是因为报文格式错误或者终端无法解析该数据类型导致的。可以检查报文格式是否正确，并确保终端支持解析该数据类型。

时间轮算法的实现



#### 时间轮算法的实现

用alarm函数放入epoll中



#### 算法

实现一个中序遍历迭代器有next和hasnext函数